# ğŸ¤ Lumi Assistant - æ™ºèƒ½è¯­éŸ³åŠ©æ‰‹å®¢æˆ·ç«¯

<div align="center">

![Lumi Assistant Logo](https://img.shields.io/badge/Lumi-Assistant-blue?style=for-the-badge)
![Platform](https://img.shields.io/badge/platform-Android-green?style=for-the-badge)
![API](https://img.shields.io/badge/API-24%2B-brightgreen?style=for-the-badge)
![License](https://img.shields.io/badge/license-MIT-purple?style=for-the-badge)

**æ–°ä¸€ä»£æ™ºèƒ½è¯­éŸ³åŠ©æ‰‹å®¢æˆ·ç«¯ï¼Œä¸“ä¸ºæ¡Œé¢ä¿¡æ¯å±•ç¤ºå’Œä¸ªäººåŠ©æ‰‹åœºæ™¯è®¾è®¡**

[âœ¨ åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [ğŸ“± åº”ç”¨åœºæ™¯](#-åº”ç”¨åœºæ™¯) â€¢ [ğŸ› ï¸ æŠ€æœ¯æ¶æ„](#ï¸-æŠ€æœ¯æ¶æ„) â€¢ [ğŸ“– å¼€å‘æŒ‡å—](#-å¼€å‘æŒ‡å—)

</div>

---

## ğŸ“¸ åº”ç”¨æˆªå›¾

<div align="center">

### ğŸ  å¾…æœºæ¨¡å¼ - æ™ºèƒ½æ¡Œé¢ä¿¡æ¯ç‰Œ
å®æ—¶æ˜¾ç¤ºæ—¶é—´ã€æ—¥æœŸã€å¤©æ°”ä¿¡æ¯ï¼Œå®Œç¾èå…¥æ¡Œé¢ç¯å¢ƒ

<img src="screenshots/screenshot1.png" width="350" alt="å¾…æœºæ¨¡å¼">

### ğŸ’¬ è¯­éŸ³äº¤äº’æµç¨‹

<table>
  <tr>
    <td><img src="screenshots/screenshot2.png" width="280" alt="ç­‰å¾…å”¤é†’"></td>
    <td><img src="screenshots/screenshot3.png" width="280" alt="è¯­éŸ³å½•éŸ³ä¸­"></td>
    <td><img src="screenshots/screenshot4.png" width="280" alt="AI å›å¤"></td>
  </tr>
  <tr>
    <td align="center"><b>1ï¸âƒ£ ç­‰å¾…å”¤é†’</b><br/><i>ç›‘å¬"ä½ å¥½å¤©å¤©"å”¤é†’è¯</i></td>
    <td align="center"><b>2ï¸âƒ£ è¯­éŸ³è¯†åˆ«</b><br/><i>å®æ—¶å½•éŸ³å’Œæ³¢å½¢æ˜¾ç¤º</i></td>
    <td align="center"><b>3ï¸âƒ£ AI å›å¤</b><br/><i>è¯­éŸ³åˆæˆå’Œæ–‡å­—å±•ç¤º</i></td>
  </tr>
</table>

**æ ¸å¿ƒåŠŸèƒ½å±•ç¤º**ï¼š
- ğŸ™ï¸ ç¦»çº¿è¯­éŸ³å”¤é†’ï¼ˆ"ä½ å¥½å¤©å¤©"ï¼‰
- ğŸ—£ï¸ å®æ—¶è¯­éŸ³è¯†åˆ«ä¸ VAD é™éŸ³æ£€æµ‹
- ğŸ¤– AI æ™ºèƒ½å¯¹è¯ä¸æµå¼å“åº”
- ğŸ”Š è¯­éŸ³åˆæˆæ’­æ”¾
- ğŸ• æ—¶é’Ÿ & æ—¥æœŸ & å¤©æ°”ä¿¡æ¯å±•ç¤º
- ğŸ“Š å®æ—¶éŸ³é¢‘æ³¢å½¢å¯è§†åŒ–

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

**Lumi Assistant** æ˜¯ä¸€æ¬¾åŸºäº Android çš„æ™ºèƒ½è¯­éŸ³åŠ©æ‰‹å®¢æˆ·ç«¯ï¼Œé›†æˆäº†å…ˆè¿›çš„ç¦»çº¿è¯­éŸ³å”¤é†’ã€å®æ—¶è¯­éŸ³è¯†åˆ«å’Œ AI å¯¹è¯æŠ€æœ¯ã€‚æœ¬é¡¹ç›®ä¸“ä¸º**æ¡Œæ­ã€æ¡Œé¢ä¿¡æ¯ç‰Œã€ä¸ªäººåŠ©æ‰‹**ç­‰åœºæ™¯è®¾è®¡ï¼Œæä¾›æµç•…çš„è¯­éŸ³äº¤äº’ä½“éªŒå’Œç¾è§‚çš„ç•Œé¢å±•ç¤ºã€‚

### ğŸ¯ æ ¸å¿ƒå®šä½

- **ğŸ  æ™ºèƒ½æ¡Œé¢åŠ©æ‰‹**ï¼šå®Œç¾èå…¥æ¡Œé¢ç¯å¢ƒï¼Œæä¾›ä¾¿æ·çš„è¯­éŸ³æœåŠ¡
- **ğŸ“± æ¡Œé¢ä¿¡æ¯ç‰Œ**ï¼šå®æ—¶æ˜¾ç¤ºè¯­éŸ³è¯†åˆ«ç»“æœå’Œ AI å›å¤ï¼Œé€‚åˆå±•ç¤ºåœºæ™¯
- **ğŸ¤ å°æ™ºè¯­éŸ³**ï¼šæ”¯æŒç¦»çº¿å”¤é†’ï¼Œéšæ—¶å“åº”è¯­éŸ³æŒ‡ä»¤
- **ğŸ¤– ä¸ªäºº AI åŠ©æ‰‹**ï¼šé›†æˆå¤§è¯­è¨€æ¨¡å‹ï¼Œæ”¯æŒæ™ºèƒ½å¯¹è¯å’Œæƒ…æ„Ÿäº¤äº’

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ™ï¸ è¯­éŸ³äº¤äº’
- **ğŸ”Š ç¦»çº¿è¯­éŸ³å”¤é†’**ï¼šé›†æˆ AIKit SDKï¼Œæ”¯æŒè‡ªå®šä¹‰å”¤é†’è¯ï¼ˆé»˜è®¤ï¼š"ä½ å¥½å¤©å¤©"ï¼‰
- **ğŸ—£ï¸ å®æ—¶è¯­éŸ³è¯†åˆ«**ï¼šé«˜ç²¾åº¦ STTï¼Œå®æ—¶æ˜¾ç¤ºè¯†åˆ«ç»“æœ
- **ğŸ¤– AI æ™ºèƒ½å¯¹è¯**ï¼šé›†æˆå¤§è¯­è¨€æ¨¡å‹ï¼Œæ”¯æŒæµå¼å“åº”
- **ğŸ”Š è¯­éŸ³åˆæˆæ’­æ”¾**ï¼šå®æ—¶æ’­æ”¾ AI å›å¤ï¼Œæ”¯æŒ Opus é«˜è´¨é‡éŸ³é¢‘

### ğŸ¨ åŒæ¨¡å¼ç•Œé¢
- **ğŸ’¬ èŠå¤©æ¨¡å¼**ï¼šä¼ ç»Ÿå¯¹è¯ç•Œé¢ï¼Œæ¶ˆæ¯åˆ—è¡¨å±•ç¤º
- **ğŸŒŠ å¾…æœºæ¨¡å¼**ï¼šå¤§æ³¢å½¢æ˜¾ç¤ºï¼Œé€‚åˆæ¡Œé¢å±•ç¤ºå’Œæ¡Œæ­åœºæ™¯
- **ğŸ­ æƒ…æ„Ÿè¡¨è¾¾**ï¼šæ”¯æŒ emoji è¡¨æƒ…æ˜¾ç¤ºï¼Œå¢å¼ºäº¤äº’ä½“éªŒ

### âš™ï¸ æ™ºèƒ½é…ç½®
- **ğŸ›ï¸ VAD é™éŸ³æ£€æµ‹**ï¼šæ™ºèƒ½æ£€æµ‹ç”¨æˆ·è¯´è¯ç»“æŸï¼Œå¯é…ç½®é˜ˆå€¼
- **ğŸŒ æœåŠ¡å™¨é…ç½®**ï¼šæ”¯æŒè‡ªå®šä¹‰ WebSocket æœåŠ¡å™¨åœ°å€
- **ğŸ¯ å”¤é†’è¯å®šåˆ¶**ï¼šå¯è‡ªå®šä¹‰è¯­éŸ³å”¤é†’è¯ï¼Œé€‚åº”ä¸åŒä½¿ç”¨åœºæ™¯

### ğŸ“Š å®æ—¶å¯è§†åŒ–
- **ğŸŒˆ éŸ³é¢‘æ³¢å½¢**ï¼šå®æ—¶æ˜¾ç¤ºéŸ³é¢‘è¾“å…¥æ³¢å½¢ï¼Œè§†è§‰æ•ˆæœå‡ºè‰²
- **âš¡ çŠ¶æ€æŒ‡ç¤º**ï¼šæ¸…æ™°çš„çŠ¶æ€æœºæŒ‡ç¤ºï¼ˆå¾…æœºã€å½•éŸ³ã€æ’­æ”¾ï¼‰
- **ğŸ“ å®æ—¶å­—å¹•**ï¼šè¯­éŸ³è¯†åˆ«å’Œ AI å›å¤çš„å®æ—¶æ–‡å­—æ˜¾ç¤º

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ ç¯å¢ƒè¦æ±‚

- **Android Studio**ï¼šæ¨èæœ€æ–°ç¨³å®šç‰ˆ
- **Android SDK**ï¼šAPI 35 (Android 15)
- **Kotlin**ï¼š2.0.21
- **æœ€ä½è®¾å¤‡è¦æ±‚**ï¼šAndroid 7.0 (API 24)

### ğŸ“¦ å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/yaotutu/lumi-assistant.git
   cd lumi-assistant
   ```

2. **å¯¼å…¥ Android Studio**
   - æ‰“å¼€ Android Studio
   - é€‰æ‹© "Open an existing Android Studio project"
   - é€‰æ‹©é¡¹ç›®ç›®å½•

3. **æ„å»ºè¿è¡Œ**
   ```bash
   # æ„å»º Debug ç‰ˆæœ¬
   ./gradlew assembleDebug

   # å®‰è£…åˆ°è®¾å¤‡
   ./gradlew installDebug

   # è¿è¡Œæµ‹è¯•
   ./gradlew test
   ```

### ğŸ”§ å‘å¸ƒæ„å»º

```bash
# æ„å»º Release ç‰ˆæœ¬ï¼ˆç”Ÿæˆå¤šæ¶æ„ APKï¼‰
./gradlew assembleRelease

# è¾“å‡ºæ–‡ä»¶ï¼š
# - app-arm64-v8a-release.apk      (64ä½ ARMï¼Œæ¨è)
# - app-armeabi-v7a-release.apk    (32ä½ ARM)
# - app-universal-release.apk      (é€šç”¨ç‰ˆæœ¬)
```

**ç­¾åé…ç½®**ï¼ˆå‘å¸ƒå¿…éœ€ï¼‰ï¼š
```bash
export RELEASE_KEYSTORE_PATH=/path/to/keystore.jks
export RELEASE_KEYSTORE_PASSWORD=your_password
export RELEASE_KEY_ALIAS=your_alias
export RELEASE_KEY_PASSWORD=your_key_password
```

---

## ğŸ“± åº”ç”¨åœºæ™¯

### ğŸ  æ¡Œæ­å±•ç¤º
- **æ¡Œé¢ä¿¡æ¯ç‰Œ**ï¼šæ”¾ç½®åœ¨æ¡Œé¢ï¼Œå®æ—¶æ˜¾ç¤ºè¯­éŸ³äº¤äº’å†…å®¹
- **æ™ºèƒ½å®¶å±…ä¸­æ§**ï¼šä½œä¸ºè¯­éŸ³æ§åˆ¶ä¸­å¿ƒï¼Œç®¡ç†æ™ºèƒ½è®¾å¤‡
- **åŠå…¬å®¤åŠ©æ‰‹**ï¼šæä¾›ä¼šè®®è®°å½•ã€æé†’ç­‰æœåŠ¡

### ğŸ“± ä¸ªäººåŠ©æ‰‹
- **ç§»åŠ¨åŠå…¬**ï¼šéšæ—¶éšåœ°çš„è¯­éŸ³åŠ©æ‰‹æœåŠ¡
- **å­¦ä¹ è¾…åŠ©**ï¼šè¯­éŸ³é—®ç­”ã€çŸ¥è¯†æŸ¥è¯¢
- **ç”Ÿæ´»æœåŠ¡**ï¼šå¤©æ°”æŸ¥è¯¢ã€æ—¥ç¨‹æé†’ç­‰

### ğŸ® äº¤äº’ä½“éªŒ
- **æƒ…æ„ŸåŒ–å¯¹è¯**ï¼šæ”¯æŒè¡¨æƒ…å’Œæƒ…æ„Ÿè¡¨è¾¾
- **å¤šæ¨¡æ€äº¤äº’**ï¼šè¯­éŸ³ + æ–‡å­— + è§†è§‰åé¦ˆ
- **ä¸ªæ€§åŒ–å®šåˆ¶**ï¼šå¯é…ç½®å”¤é†’è¯å’ŒæœåŠ¡å™¨åœ°å€

---

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### ğŸ—ï¸ æ¶æ„æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UI Layer (Compose)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                ViewModel Layer (MVVM)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  Repository Layer                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            Data & Network Layer (WebSocket)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“š æ ¸å¿ƒæŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|----------|------|------|
| **UI æ¡†æ¶** | Jetpack Compose | BOM 2024.09.00 | ç°ä»£å£°æ˜å¼ UI |
| **æ¶æ„æ¨¡å¼** | MVVM + Hilt | 2.51.1 | ä¾èµ–æ³¨å…¥å’ŒçŠ¶æ€ç®¡ç† |
| **å¯¼èˆª** | Navigation Compose | 2.7.7 | å•é¡µé¢åº”ç”¨æ¶æ„ |
| **æ•°æ®æŒä¹…åŒ–** | DataStore | 1.0.0 | ç°ä»£åŒ–é…ç½®å­˜å‚¨ |
| **ç½‘ç»œé€šä¿¡** | OkHttp3 WebSocket | 4.12.0 | å®æ—¶åŒå‘é€šä¿¡ |
| **éŸ³é¢‘å¤„ç†** | Opus ç¼–è§£ç  | JNA | é«˜è´¨é‡éŸ³é¢‘å‹ç¼© |
| **è¯­éŸ³å”¤é†’** | AIKit SDK | ç¦»çº¿ç‰ˆæœ¬ | ç§‘å¤§è®¯é£ç¦»çº¿å”¤é†’ |

### ğŸ”„ çŠ¶æ€æœºè®¾è®¡

```mermaid
stateDiagram-v2
    [*] --> IDLEï¼šåº”ç”¨å¯åŠ¨
    IDLE --> RECORDINGï¼šè¯­éŸ³å”¤é†’æˆåŠŸ
    RECORDING --> PLAYINGï¼šVADæ£€æµ‹åˆ°é™éŸ³
    PLAYING --> IDLEï¼šAIæ’­æ”¾å®Œæˆ
    RECORDING --> IDLEï¼šç”¨æˆ·ä¸­æ­¢
    PLAYING --> IDLEï¼šç”¨æˆ·ä¸­æ­¢

    IDLEï¼šå¾…æœºçŠ¶æ€<br/>ç­‰å¾…å”¤é†’è¯
    RECORDINGï¼šå½•éŸ³çŠ¶æ€<br/>VADé™éŸ³æ£€æµ‹
    PLAYINGï¼šæ’­æ”¾çŠ¶æ€<br/>AIå›å¤æ’­æ”¾
```

### ğŸ”Š éŸ³é¢‘å¤„ç†é“¾è·¯

```
ğŸ¤ ç”¨æˆ·è¯­éŸ³
    â†“
ğŸ“± AudioRecorder (PCM 16kHz)
    â†“
ğŸ—œï¸ Opus ç¼–ç å‹ç¼©
    â†“
ğŸŒ WebSocket å®æ—¶ä¼ è¾“
    â†“
ğŸ¤– AI æœåŠ¡å™¨å¤„ç†
    â†“
ğŸŒ WebSocket è¿”å›éŸ³é¢‘
    â†“
ğŸ“± AudioPlayer è§£ç æ’­æ”¾
    â†“
ğŸ”Š æ‰¬å£°å™¨è¾“å‡º
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
lumi-assistant/
â”œâ”€â”€ ğŸ“± app/src/main/java/com/lumi/assistant/
â”‚   â”œâ”€â”€ ğŸ—ï¸ di/                      # Hilt ä¾èµ–æ³¨å…¥æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ AppModule.kt            # åº”ç”¨çº§å•ä¾‹é…ç½®
â”‚   â”‚   â””â”€â”€ WakeupModule.kt         # å”¤é†’æ¨¡å—æ³¨å…¥
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ§­ navigation/              # Navigation Compose
â”‚   â”‚   â”œâ”€â”€ NavGraph.kt             # å¯¼èˆªå›¾é…ç½®
â”‚   â”‚   â””â”€â”€ Routes.kt               # è·¯ç”±å¸¸é‡å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ§  viewmodel/               # ViewModel ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ VoiceAssistantViewModel.kt    # ä¸»ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ SettingsViewModel.kt         # è®¾ç½®é¡µé¢é€»è¾‘
â”‚   â”‚   â””â”€â”€ StandbyModeViewModel.kt      # å¾…æœºæ¨¡å¼é€»è¾‘
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ’¾ repository/              # æ•°æ®ä»“åº“å±‚
â”‚   â”‚   â””â”€â”€ SettingsRepository.kt   # DataStore é…ç½®æŒä¹…åŒ–
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸŒ network/                 # ç½‘ç»œé€šä¿¡å±‚
â”‚   â”‚   â””â”€â”€ WebSocketManager.kt     # WebSocket è¿æ¥ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ”Š audio/                   # éŸ³é¢‘å¤„ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ AudioPlayer.kt          # éŸ³é¢‘æ’­æ”¾ + Opus è§£ç 
â”‚   â”‚   â””â”€â”€ AudioRecorder.kt        # å½•éŸ³ + Opus ç¼–ç 
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ¤ wakeup/                  # è¯­éŸ³å”¤é†’æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ WakeupManager.kt        # AIKit SDK ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ WakeupListener.kt       # å”¤é†’å›è°ƒæ¥å£
â”‚   â”‚   â””â”€â”€ WakeupConfig.kt         # å”¤é†’é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ âš™ï¸ config/                  # é…ç½®æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ AppMode.kt              # åº”ç”¨æ¨¡å¼æšä¸¾
â”‚   â”‚   â””â”€â”€ AppSettings.kt          # é…ç½®æ•°æ®ç±»
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“Š model/                   # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ Message.kt              # æ¶ˆæ¯æ•°æ®ç±»
â”‚   â”‚
â”‚   â”ï¸ ui/                          # UI ç•Œé¢å±‚ (Compose)
â”‚   â”œâ”€â”€ VoiceAssistantScreen.kt    # ä¸»èŠå¤©ç•Œé¢
â”‚   â”œâ”€â”€ SettingsScreen.kt          # è®¾ç½®é¡µé¢ç•Œé¢
â”‚   â”œâ”€â”€ StandbyScreen.kt           # å¾…æœºæ¨¡å¼ç•Œé¢
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ AudioWaveform.kt        # æ³¢å½¢å¯è§†åŒ–ç»„ä»¶
â”‚   â””â”€â”€ theme/
â”‚       â”œâ”€â”€ Color.kt                # Material 3 é¢œè‰²
â”‚       â”œâ”€â”€ Theme.kt                # ä¸»é¢˜é…ç½®
â”‚       â””â”€â”€ Type.kt                 # æ’ç‰ˆç³»ç»Ÿ
â”‚
â”œâ”€â”€ ğŸ“š docs/                        # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ architecture/               # æ¶æ„è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ release/                    # å‘å¸ƒæµç¨‹æ–‡æ¡£
â”‚   â”œâ”€â”€ guides/                     # ä½¿ç”¨æŒ‡å—
â”‚   â””â”€â”€ ci-cd/                      # CI/CD é…ç½®
â”‚
â”œâ”€â”€ ğŸ”§ .github/workflows/           # GitHub Actions
â”œâ”€â”€ ğŸ“„ CLAUDE.md                    # Claude Code é¡¹ç›®æŒ‡å—
â””â”€â”€ ğŸ” keystore/                    # ç­¾åå¯†é’¥ï¼ˆæœ¬åœ°ï¼Œå·²å¿½ç•¥ï¼‰
```

---

## ğŸ”Œ API æ¥å£

### ğŸ“¡ WebSocket é€šä¿¡åè®®

#### å®¢æˆ·ç«¯æ¶ˆæ¯ç±»å‹

| æ¶ˆæ¯ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|----------|------|------|
| `initialize` | åˆå§‹åŒ–è¿æ¥ | `{"type":"initialize","version":"1.0"}` |
| `listen_start` | å¼€å§‹è¯­éŸ³ç›‘å¬ | `{"type":"listen_start"}` |
| `listen_stop` | åœæ­¢ç›‘å¬ | `{"type":"listen_stop"}` |
| `audio_end` | éŸ³é¢‘ç»“æŸæ ‡å¿— | `{"type":"audio_end"}` |
| `text_message` | æ–‡æœ¬æ¶ˆæ¯ | `{"type":"text_message","text":"ä½ å¥½"}` |
| `abort` | ä¸­æ­¢å½“å‰æ“ä½œ | `{"type":"abort"}` |

#### æœåŠ¡å™¨æ¶ˆæ¯ç±»å‹

| æ¶ˆæ¯ç±»å‹ | è¯´æ˜ | æ•°æ®æ ¼å¼ |
|----------|------|----------|
| `server_ready` | æœåŠ¡å™¨å°±ç»ª | JSON |
| `stt_result` | è¯­éŸ³è¯†åˆ«ç»“æœ | JSON |
| `llm_response` | LLM æµå¼å“åº” | JSON |
| `tts_state` | TTS æ’­æ”¾çŠ¶æ€ | JSON |
| `emotion` | æƒ…æ„Ÿè¡¨æƒ… | JSON (emoji) |
| `tts_sentence` | TTS å¥å­ | JSON |
| äºŒè¿›åˆ¶æ¶ˆæ¯ | AI éŸ³é¢‘æ•°æ® | Opus ç¼–ç éŸ³é¢‘ |

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½å¼€å‘

#### 1. è¯­éŸ³å”¤é†’é›†æˆ
```kotlin
// å”¤é†’é…ç½®
val wakeupConfig = WakeupConfig(
    wakeWord = "ä½ å¥½å¤©å¤©",
    threshold = 0.5f
)

// å”¤é†’ç›‘å¬
wakeupManager.setListener(object : WakeupListener {
    override fun onWakeupSuccess() {
        viewModel.startRecording()
    }
})
```

#### 2. éŸ³é¢‘å½•åˆ¶ä¸ç¼–ç 
```kotlin
// å¼€å§‹å½•éŸ³
audioRecorder.startRecording { audioData ->
    // Opus ç¼–ç 
    val encodedData = opusEncoder.encode(audioData)
    // WebSocket å‘é€
    webSocketManager.sendBinary(encodedData)
}
```

#### 3. VAD é™éŸ³æ£€æµ‹
```kotlin
// VAD å‚æ•°é…ç½®
val vadConfig = VadConfig(
    silenceThresholdMs = 2000,  // é™éŸ³é˜ˆå€¼ 2ç§’
    volumeThreshold = 900       // éŸ³é‡é˜ˆå€¼
)

// é™éŸ³æ£€æµ‹
vadDetector.checkSilence { isSilent ->
    if (isSilent) {
        stopRecording()
        sendAudioEnd()
    }
}
```

### ğŸ”§ è°ƒè¯•æŠ€å·§

#### æŸ¥çœ‹æ—¥å¿—
```bash
# Hilt ç”Ÿæˆä»£ç æ—¥å¿—
cat app/build/generated/source/kapt/debug/

# å”¤é†’ SDK æ—¥å¿—
adb shell run-as com.lumi.assistant cat files/wakeup/logs/
```

#### ç½‘ç»œè°ƒè¯•
- åœ¨ `WebSocketManager.kt` ä¸­æ·»åŠ è¯¦ç»†æ—¥å¿—
- ä½¿ç”¨ WebSocket æµ‹è¯•å·¥å…·éªŒè¯åè®®
- æ£€æŸ¥é˜²ç«å¢™å’Œç½‘ç»œè¿æ¥çŠ¶æ€

#### éŸ³é¢‘è°ƒè¯•
- æ£€æŸ¥å½•éŸ³æƒé™å’Œè®¾å¤‡å…¼å®¹æ€§
- éªŒè¯ Opus ç¼–è§£ç å‚æ•°
- æµ‹è¯•ä¸åŒè®¾å¤‡çš„éŸ³é¢‘ç¡¬ä»¶

---

## ğŸ§ª æµ‹è¯•

### ğŸ“‹ æµ‹è¯•ç±»å‹

```bash
# å•å…ƒæµ‹è¯•
./gradlew test

# é›†æˆæµ‹è¯•
./gradlew connectedAndroidTest

# UI æµ‹è¯•
./gradlew connectedDebugAndroidTest

# æµ‹è¯•è¦†ç›–ç‡
./gradlew jacocoTestReport
```

### ğŸ¯ æµ‹è¯•é‡ç‚¹

- **è¯­éŸ³å”¤é†’åŠŸèƒ½**ï¼šç¦»çº¿å”¤é†’å‡†ç¡®æ€§æµ‹è¯•
- **éŸ³é¢‘å½•åˆ¶æ’­æ”¾**ï¼šä¸åŒè®¾å¤‡çš„å…¼å®¹æ€§æµ‹è¯•
- **ç½‘ç»œé€šä¿¡**ï¼šWebSocket è¿æ¥ç¨³å®šæ€§æµ‹è¯•
- **UI äº¤äº’**ï¼šCompose ç»„ä»¶æ¸²æŸ“å’Œäº¤äº’æµ‹è¯•

---

## ğŸ“¦ éƒ¨ç½²å‘å¸ƒ

### ğŸ“‹ ç‰ˆæœ¬æ›´æ–°æ—¥å¿—

| ç‰ˆæœ¬ | åˆ†æ”¯ | å‘å¸ƒç±»å‹ | æ›´æ–°å†…å®¹ |
|------|------|----------|----------|
| `0.1.0-beta.1` | `dev` | ğŸ§ª æµ‹è¯•ç‰ˆ | ä¼˜åŒ– GitHub Actions å‘å¸ƒæµç¨‹ï¼Œä¿®å¤ç­¾åé—®é¢˜ |
| `0.1.0` | `main` | ğŸ“¦ å¼€å‘ç‰ˆ | å®Œæ•´é‡æ„ä¸º Android é¡¹ç›®ï¼Œæ›¿æ¢ Flutter å®ç° |

### ğŸš€ CI/CD æµç¨‹

é¡¹ç›®é‡‡ç”¨ GitHub Actions è‡ªåŠ¨åŒ–æ„å»ºï¼š

- **Android Build**ï¼šè‡ªåŠ¨æ„å»ºå¤šæ¶æ„ APK
- **Release ç®¡ç†**ï¼šè‡ªåŠ¨ç”Ÿæˆ changelog å’Œ release notes
- **ä»£ç è´¨é‡**ï¼šè‡ªåŠ¨è¿è¡Œæµ‹è¯•å’Œä»£ç æ£€æŸ¥

### ğŸ“± å¤šæ¶æ„æ”¯æŒ

| æ¶æ„ | è¯´æ˜ | æ¨èè®¾å¤‡ |
|------|------|----------|
| `arm64-v8a` | 64ä½ ARM | ç°ä»£ä¸­é«˜ç«¯è®¾å¤‡ |
| `armeabi-v7a` | 32ä½ ARM | è€æ—§å’Œå…¥é—¨è®¾å¤‡ |
| `universal` | é€šç”¨ç‰ˆæœ¬ | å…¼å®¹æ‰€æœ‰è®¾å¤‡ |

### ğŸ“‹ å‘å¸ƒæ£€æŸ¥æ¸…å•

- [ ] ä»£ç å®¡æŸ¥é€šè¿‡
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] ç‰ˆæœ¬å·æ›´æ–°
- [ ] æ›´æ–°æ—¥å¿—å®Œå–„
- [ ] ç­¾åå¯†é’¥é…ç½®æ­£ç¡®
- [ ] å¤šæ¶æ„ APK æ„å»º
- [ ] åŠŸèƒ½æµ‹è¯•éªŒè¯

---

## ğŸ“š æ–‡æ¡£èµ„æº

### ğŸ“– é¡¹ç›®æ–‡æ¡£
- [ğŸ“‹ æ¶æ„æ›´æ–°è¯´æ˜](docs/architecture/ARCHITECTURE_UPDATE.md)
- [ğŸ”„ åŒåˆ†æ”¯å‘å¸ƒæµç¨‹](docs/release/DUAL_BRANCH_RELEASE.md)
- [âš™ï¸ å‘å¸ƒåˆ†æ”¯è®¾ç½®](docs/release/RELEASE_BRANCH_SETUP.md)
- [ğŸš€ å‘å¸ƒå¿«é€Ÿå‚è€ƒ](docs/release/RELEASE_QUICK_REFERENCE.md)
- [ğŸ“¥ ä¸‹è½½æŒ‡å—](docs/guides/HOW_TO_DOWNLOAD.md)
- [ğŸ¤– GitHub Actions å¿«é€Ÿå¼€å§‹](docs/ci-cd/GITHUB_ACTIONS_QUICKSTART.md)
- [ğŸ’¬ Claude Code é¡¹ç›®æŒ‡å—](CLAUDE.md)

### ğŸ”— æŠ€æœ¯å‚è€ƒ
- [Jetpack Compose å®˜æ–¹æ–‡æ¡£](https://developer.android.com/jetpack/compose)
- [Hilt ä¾èµ–æ³¨å…¥æ–‡æ¡£](https://dagger.dev/hilt/)
- [Navigation Compose æŒ‡å—](https://developer.android.com/jetpack/compose/navigation)
- [Material Design 3](https://m3.material.io/)

---

## ğŸ” æƒé™è¯´æ˜

åº”ç”¨éœ€è¦ä»¥ä¸‹æƒé™ï¼š

| æƒé™ | ç”¨é€” | å¿…è¦æ€§ |
|------|------|--------|
| `RECORD_AUDIO` | å½•éŸ³åŠŸèƒ½ | å¿…éœ€ |
| `READ_PHONE_STATE` | AIKit SDK æˆæƒ | å¿…éœ€ |
| `INTERNET` | ç½‘ç»œé€šä¿¡ | å¿…éœ€ |
| `ACCESS_NETWORK_STATE` | ç½‘ç»œçŠ¶æ€æ£€æŸ¥ | å¿…éœ€ |

**æƒé™ç”³è¯·æ—¶æœº**ï¼šé¦–æ¬¡å¯åŠ¨æ—¶åŠ¨æ€è¯·æ±‚ï¼Œç”¨æˆ·å¯éšæ—¶åœ¨è®¾ç½®ä¸­ç®¡ç†ã€‚

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### ğŸŒŸ è´¡çŒ®æ–¹å¼

- **ğŸ› æŠ¥å‘Š Bug**ï¼šåœ¨ Issues ä¸­è¯¦ç»†æè¿°é—®é¢˜
- **ğŸ’¡ åŠŸèƒ½å»ºè®®**ï¼šæå‡ºæ–°åŠŸèƒ½æƒ³æ³•å’Œæ”¹è¿›å»ºè®®
- **ğŸ“ ä»£ç è´¡çŒ®**ï¼šæäº¤ Pull Request
- **ğŸ“– æ–‡æ¡£å®Œå–„**ï¼šæ”¹è¿›é¡¹ç›®æ–‡æ¡£å’Œæ³¨é‡Š

### ğŸ¯ å¼€å‘æµç¨‹

1. **Fork** é¡¹ç›®åˆ°ä½ çš„ GitHub è´¦å·
2. **åˆ›å»º** åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. **æäº¤** ä½ çš„ä¿®æ”¹ (`git commit -m 'Add amazing feature'`)
4. **æ¨é€** åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. **åˆ›å»º** Pull Request

### ğŸ“‹ ä»£ç è§„èŒƒ

- éµå¾ª [Kotlin å®˜æ–¹ç¼–ç è§„èŒƒ](https://kotlinlang.org/docs/coding-conventions.html)
- ä½¿ç”¨ [ktlint](https://ktlint.github.io/) è¿›è¡Œä»£ç æ ¼å¼åŒ–
- ä¸ºæ–°åŠŸèƒ½ç¼–å†™ç›¸åº”çš„æµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **MIT è®¸å¯è¯** - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

```
MIT License

Copyright (c) 2024 Lumi Assistant

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.
```

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’ŒæŠ€æœ¯ï¼š

- [Jetpack Compose](https://developer.android.com/jetpack/compose) - ç°ä»£ UI å·¥å…·åŒ…
- [Hilt](https://dagger.dev/hilt/) - ä¾èµ–æ³¨å…¥æ¡†æ¶
- [OkHttp](https://square.github.io/okhttp/) - HTTP & WebSocket å®¢æˆ·ç«¯
- [Opus Codec](https://opus-codec.org/) - é«˜è´¨é‡éŸ³é¢‘ç¼–è§£ç 
- [Material Design 3](https://m3.material.io/) - è®¾è®¡ç³»ç»Ÿ

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼**

[ğŸ“± ä¸‹è½½ä½“éªŒ](docs/guides/HOW_TO_DOWNLOAD.md) â€¢ [ğŸ› æŠ¥å‘Šé—®é¢˜](https://github.com/yaotutu/lumi-assistant/issues) â€¢ [ğŸ’¡ åŠŸèƒ½å»ºè®®](https://github.com/yaotutu/lumi-assistant/discussions)

Made with â¤ï¸ by [Lumi Team](https://github.com/yaotutu)

</div>